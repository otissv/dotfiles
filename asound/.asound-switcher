#!/bin/sh

clear
echo -e "\nSound Card Menu\n"
echo -e "\nModule(s) being used for soundcards:"
cat /proc/asound/modules

# reset file
rm -f ~/.asoundrc

echo -e "\nSound cards"
aplay -l | grep card

# Find number of sound cards/onboard available
aplay -l | grep card | cut -d":" -f1 > /tmp/tmp
cat /tmp/tmp | uniq | sort > /tmp/tmp2
cat /tmp/tmp2 > /tmp/tmp
rm -f /tmp/tmp2



# List sound cards available
totcrd=`wc -l /tmp/tmp | cut -d" " -f1`
echo -e "\n\nThere are $totcrd sound card(s) from which to select:"
cat /tmp/tmp

echo -e "\n\nEnter card number to be used for sound: \c"
read sc

echo -e "\nEnter device number of selected card: \c"
read dv

# update .asoundrc
touch ~/.asoundrc
echo "defaults.pcm.card $sc" > ~/.asoundrc
echo "defaults.pcm.device $dv" >> ~/.asoundrc
echo "defaults.ctl.card $sc" >> ~/.asoundrc

# display info
echo -e "\nNew default sound card:"
echo -e "  card:   $sc,"
echo -e "  device: $dv"


#restart pulse audio
pulseaudio --kill
pulseaudio --start

# unmute sound
amixer sset Master unmute
